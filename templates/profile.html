{% extends 'base.html' %}
{% block title %}Your profile{% endblock %}



{% block body %}
<div class="container"> 

  <nav class="navbar navbar-expand-lg navbar-light bg-light">
<ul class="nav nav-tabs">
  <li class="nav-item">
    <a class="nav-link active" aria-current="page" href="/profile">My profile</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/following">Following</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/status_posts">All status posts</a>
  </li>
</ul>
</nav>


<h1>Post a new status</h1>
<form action="/profile" method="POST">
  <label for="mood-select">Choose your mood:</label>
<select name="mood" id="mood-select">
  <option value="happy">Happy</option>
  <option value="sad">Sad</option>
</select>
  <label for="status_description">Description:</label>
  <input type="text" name="description" id="status_description"
  onkeyup="countChar(event)" maxlength="255" />
  <span class="help-block">Please keep status post length under 255 characters.</span>
  <br>

  <button type="submit">Post</button>

</form>
<div class=page>
<h2>Your statuses</h2>
<ul class="statuses">
{% if status_posts |length == 0 %}
  <p>Currently no status posts</p>
{% else %}

  {% for status_post in status_posts %}
  
{% endfor %}
{% endif %}

{% for status_post in status_posts|reverse %}
  {% if not status_post %}
    <p>Currently no status posts</p>
  {% endif %}
  <li>
    {{ status_post.user.user_handle }}
    {{ status_post.mood.mood_type }}
    {{ status_post }}
    <form action="{{ url_for('delete_status',
    status_id=status_post.status_id) }}" method="post">
      <input type="submit" value="Delete">
    </form>
  </li>


  {% for comment in status_post.comments %}
  <p>
    {{ comment.user.user_handle }}
    {{ comment.comment_description }}
    {{ comment.post_create_date }}
   
  </p>

  <form action="{{ url_for('delete_comment',
    comment_id=comment.comment_id) }}" method="post">
      <input type="submit" value="Delete">
    </form>

  </p>
  {% endfor %}
<div> 
<h3>Add a comment</h3>
<div class="form-group">
<form id="comment-form" method="post" action="/post_a_comment">
  <input hidden="true" id="status-id" name="status-id" value={{ status_post.status_id }}>
  <label for="comment-description">Description:</label>
  <input type="text" id="comment-description" name="comment-description"
  onkeyup="countChar(event)" maxlength="255" />
  <span class="help-block">Please keep comment length under 255 characters.</span>
</div>


  <button id="comment-button" class="btn btn-primary mt-2">Post</button>

</form>
</div>

 
  
{% endfor %}

</ul>
</div>
{% endblock body %}
